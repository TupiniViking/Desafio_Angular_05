"use strict";(self.webpackChunkdesafio_angular=self.webpackChunkdesafio_angular||[]).push([[873],{8873:(E,u,r)=>{r.r(u),r.d(u,{LoginModule:()=>P});var d=r(9808),m=r(8759),o=r(4893),l=r(1777),c=r(727),f=r(8746),h=r(8505),v=r(2340),_=r(520),C=r(9230);const T=v.N.apiURL;let L=(()=>{class e{constructor(t,n){this.httpClient=t,this.userService=n}auth(t,n){return this.httpClient.post(`${T}/user/login`,{userName:t,password:n},{observe:"response"}).pipe((0,h.b)(s=>{var a;const p=null!==(a=s.headers.get("x-access-token"))&&void 0!==a?a:"";this.userService.setUserToken(p)}))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(_.eN),o.LFG(C.K))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=r(1979),g=r(2382);let Z=(()=>{class e{constructor(){this.message=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-message"]],inputs:{message:"message"},decls:2,vars:1,consts:[[1,"text-danger","d-block","mt-1"]],template:function(t,n){1&t&&(o.TgZ(0,"small",0),o._uU(1),o.qZA()),2&t&&(o.xp6(1),o.Oqu(n.message))},encapsulation:2}),e})();function F(e,i){1&e&&o._UZ(0,"app-message",29)}function b(e,i){1&e&&o._UZ(0,"i",30)}function M(e,i){1&e&&o._UZ(0,"i",31)}function w(e,i){1&e&&o._UZ(0,"app-message",32)}function S(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",33),o.NdJ("touchstart",function(){return o.CHM(t),o.oxw().toggleTooltip()}),o._uU(1," Se desmarcado, ser\xe1 necess\xe1rio entrar com o login novamente ap\xf3s 10 segundos da p\xe1gina ter sido fechada. "),o.qZA()}2&e&&o.Q6J("@fade",void 0)}function x(e,i){1&e&&(o.TgZ(0,"div"),o._uU(1,"Entrar"),o.qZA())}function A(e,i){1&e&&o._UZ(0,"span",34)}let I=(()=>{class e{constructor(t,n,s){this.authService=t,this.autoLoginService=n,this.router=s,this._authSub=new c.w0,this._autoLogin=!1,this.isPasswordShown=!1,this.isSigningIn=!1,this.isTooltipVisible=!1,this.password="",this.passwordType="password",this.user=""}get autoLogin(){return this._autoLogin}set autoLogin(t){this._autoLogin=t,this.autoLoginService.setAutoLogin(this._autoLogin)}hideTooltip(){this.isTooltipVisible=!1}login(){this.isSigningIn=!0,this._authSub=this.authService.auth(this.user,this.password).pipe((0,f.x)(()=>this.isSigningIn=!1)).subscribe({complete:()=>this.router.navigate(["home"]),error:t=>alert(t.status?"Usu\xe1rio ou senha inv\xe1lidos":"Sem resposta do servidor")})}ngOnDestroy(){this._authSub.unsubscribe()}ngOnInit(){this._autoLogin=this.autoLoginService.isAutoLoginEnabled()}showTooltip(){this.isTooltipVisible=!0}toggleShowPassword(){this.isPasswordShown=!this.isPasswordShown,this.passwordType=this.isPasswordShown?"text":"password"}toggleTooltip(){this.isTooltipVisible=!this.isTooltipVisible}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(L),o.Y36(y.v),o.Y36(m.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login-form"]],decls:35,vars:12,consts:[[1,"text-center","text-primary"],[1,"form","mt-5",3,"ngSubmit"],["loginForm","ngForm"],["id","user-field",1,"mb-3"],[1,"input-group"],[1,"input-group-text"],[1,"fa","fa-solid","fa-user","text-primary"],["type","text","placeholder","Insira seu usu\xe1rio","name","user","required","",1,"form-control",3,"ngModel","ngModelChange"],["userField","ngModel"],["message","Usu\xe1rio obrigat\xf3rio",4,"ngIf"],["id","password-field",1,"mb-3"],[1,"fa","fa-solid","fa-lock","text-primary"],["type","password","placeholder","Insira sua senha","name","password","required","",1,"form-control",3,"type","ngModel","ngModelChange"],["passwordField","ngModel"],["tabindex","0","role","button",1,"input-group-text","position-relative",2,"z-index","1",3,"click","keypress"],["class","fa fa-solid fa-eye-slash text-primary",4,"ngIf","ngIfElse"],["eyeOpened",""],["message","Senha obrigat\xf3ria",4,"ngIf"],["id","auto-login-field",1,"mb-3"],[1,"d-flex","justify-content-center","justify-content-md-end"],["for","flexSwitchCheckDefault",1,"form-check-label",2,"margin-top","2px"],[1,"toggle-switch","form-check-inline","form-switch","ms-5","me-0"],["type","checkbox","role","switch","id","flexSwitchCheckDefault","name","autoLogin",1,"form-check-input",3,"ngModel","ngModelChange"],["tabindex","0",1,"login-tooltip-icon","d-flex","fa","fa-info","text-primary",3,"mouseover","mouseout","keypress","touchstart"],["class","login-tooltip",3,"touchstart",4,"ngIf"],[1,"d-grid"],[1,"btn","btn-primary","btn-block",3,"disabled"],[4,"ngIf","ngIfElse"],["spinnerBlock",""],["message","Usu\xe1rio obrigat\xf3rio"],[1,"fa","fa-solid","fa-eye-slash","text-primary"],[1,"fa","fa-solid","fa-eye","text-primary"],["message","Senha obrigat\xf3ria"],[1,"login-tooltip",3,"touchstart"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,n){if(1&t&&(o.TgZ(0,"h2",0),o._uU(1,"Boas-vindas"),o.qZA(),o.TgZ(2,"form",1,2),o.NdJ("ngSubmit",function(){return n.login()}),o.TgZ(4,"div",3)(5,"div",4)(6,"div",5),o._UZ(7,"i",6),o.qZA(),o.TgZ(8,"input",7,8),o.NdJ("ngModelChange",function(a){return n.user=a}),o.qZA()(),o.YNc(10,F,1,0,"app-message",9),o.qZA(),o.TgZ(11,"div",10)(12,"div",4)(13,"div",5),o._UZ(14,"i",11),o.qZA(),o.TgZ(15,"input",12,13),o.NdJ("ngModelChange",function(a){return n.password=a}),o.qZA(),o.TgZ(17,"div",14),o.NdJ("click",function(){return n.toggleShowPassword()})("keypress",function(){return n.toggleShowPassword()}),o.YNc(18,b,1,0,"i",15),o.YNc(19,M,1,0,"ng-template",null,16,o.W1O),o.qZA()(),o.YNc(21,w,1,0,"app-message",17),o.qZA(),o.TgZ(22,"div",18)(23,"div",19)(24,"label",20),o._uU(25," Logar automaticamente "),o.qZA(),o.TgZ(26,"div",21)(27,"input",22),o.NdJ("ngModelChange",function(a){return n.autoLogin=a}),o.qZA(),o.TgZ(28,"i",23),o.NdJ("mouseover",function(){return n.showTooltip()})("mouseout",function(){return n.hideTooltip()})("keypress",function(){return n.toggleTooltip()})("touchstart",function(){return n.toggleTooltip()}),o.qZA(),o.YNc(29,S,2,1,"div",24),o.qZA()()(),o.TgZ(30,"div",25)(31,"button",26),o.YNc(32,x,2,0,"div",27),o.YNc(33,A,1,0,"ng-template",null,28,o.W1O),o.qZA()()()),2&t){const s=o.MAs(3),a=o.MAs(9),p=o.MAs(16),k=o.MAs(20),N=o.MAs(34);o.xp6(8),o.Q6J("ngModel",n.user),o.xp6(2),o.Q6J("ngIf",a.invalid&&a.touched),o.xp6(5),o.Q6J("type",n.passwordType)("ngModel",n.password),o.xp6(3),o.Q6J("ngIf",!n.isPasswordShown)("ngIfElse",k),o.xp6(3),o.Q6J("ngIf",p.invalid&&p.touched),o.xp6(6),o.Q6J("ngModel",n.autoLogin),o.xp6(2),o.Q6J("ngIf",n.isTooltipVisible),o.xp6(2),o.Q6J("disabled",s.invalid||n.isSigningIn),o.xp6(1),o.Q6J("ngIf",!n.isSigningIn)("ngIfElse",N)}},directives:[g._Y,g.JL,g.F,g.Fj,g.Q7,g.JJ,g.On,d.O5,Z,g.Wl],styles:[".toggle-switch[_ngcontent-%COMP%]{font-size:1.5rem;position:relative;bottom:.2rem}#auto-login-field[_ngcontent-%COMP%]{position:relative}#auto-login-field[_ngcontent-%COMP%]   .login-tooltip[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;font-size:.875rem;width:20rem;height:5rem;position:absolute;bottom:0;left:-14rem;display:flex;justify-content:center;align-items:center;padding:.25rem 1rem;border-radius:10px;transform:translateY(100%);z-index:1}#auto-login-field[_ngcontent-%COMP%]   .login-tooltip-icon[_ngcontent-%COMP%]{position:absolute;width:1.5rem;height:1.5rem;border-radius:50%;right:-1.6rem;top:6px;background-color:transparent;border:2px solid #0d6efd;justify-content:center;align-items:center;font-size:1rem}"],data:{animation:[(0,l.X$)("fade",[(0,l.eR)(":enter",[(0,l.oB)({opacity:0}),(0,l.jt)(100,(0,l.oB)({opacity:1}))]),(0,l.eR)(":leave",[(0,l.oB)({opacity:1}),(0,l.jt)(100,(0,l.oB)({opacity:0}))])])]}}),e})();const J=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:9,vars:0,consts:[[1,"viewport-center"],[1,"container"],[1,"row","align-items-center"],[1,"offset-sm-6","col-sm-6","p-5"],["src","assets/img/ford.png","alt","Ford Logo",1,"ford-logo","img-fluid","d-block","m-auto"],[1,"col-sm-6","mt-5","mb-2"],["src","assets/img/Ranger.png","alt","Ford Ranger",1,"img-fluid","d-none","d-sm-block"],[1,"col-sm-6"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"img",4),o.qZA(),o.TgZ(5,"div",5),o._UZ(6,"img",6),o.qZA(),o.TgZ(7,"div",7),o._UZ(8,"app-login-form"),o.qZA()()()())},directives:[I],styles:[".viewport-center[_ngcontent-%COMP%]{min-height:90vh;display:flex;align-items:center}.ford-logo[_ngcontent-%COMP%]{width:100%}@media (min-width: 40em){.ford-logo[_ngcontent-%COMP%]{width:50%}}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[m.Bz.forChild(J)],m.Bz]}),e})();var O=r(4466);let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[d.ez,U,g.u5,O.m]]}),e})()}}]);